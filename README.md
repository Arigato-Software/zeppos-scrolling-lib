# Прокрутка экрана с заданным шагом

Библиотека Scrolling позволяет добавить скроллинг экрана (точнее, контейнера) с заданным шагом.

## Возможности

1. Горизонтальная, вертикальная прокрутка или оба варианта сразу.
2. Прокрутка с заданным шагом.
3. Эффект торможения и доводчика.
4. Callback-функции на каждый кадр прокрутки, на завершение прокрутки и на свайпы по экрану.

## Установка и подключение

1. Скопировать файл библиотеки `scrolling.js` в папку `libs` проекта (если такой папки нет - создать).
2. В файл app.json в параметр `"permissions"` добавить `"data:os.device.info"`.
3. Подключить библиотеку (проверьте правильность путей):
```js
import { Scrolling, SCROLL_MODE_HORIZONTAL, SCROLL_MODE_VERTICAL } from '../libs/scrolling'
```
4. Создать объект класса `Scrolling` (описание параметров см. ниже):
```js
const scrolling = new Scrolling(params)
```
5. Разместить на контейнере `scrolling.container` все элементы, которые должны прокручиваться.
6. Каждый элемент `element` на контейнере сделать перетаскиваемым:
```js
scrolling.setScrolling(element);
```

## Параметры конструктора

`const scrolling = new Scrolling(params = {})` - создание прокрутки

### params
`mode: SCROLL_MODE_HORIZONTAL | SCROLL_MODE_VERTICAL` - направление прокрутки (`SCROLL_MODE_HORIZONTAL`, `SCROLL_MODE_VERTICAL`)
`step_x: 1` - шаг прокрутки по горизонтали
`step_y: 1` - шаг прокрутки по вертикали
`k_braking: 0.9` - коэффициент торможения (0..1)
`finishing_speed: 8` - скорость доводки до заданного шага
`container: {}` - параметры контейнера
`scroll_frame_func: null` - callback(info) функция, вызываемая на каждый кадр прокрутки
`scroll_complete_func: null` - callback(info) функция, вызываемая при завершении прокрутки
`gesture_func: null` - callback(event) функция обработки свайпов (за пределами контейнера для прокрутки)

### info
`x` - смещение контейнера по горизонтали
`y` - смещение контейнера по вертикали

### container
`x: 0` - координата x контейнера
`y: 0` - координата y контейнера
`w: width` - ширина контейнера
`h: height` - высота контейнера
`pos_x: 0` - базовое смещение контейнера по горизонтали
`pos_y: 0` - базовое смещение контейнера по вертикали

`scrolling.container` - прокручиваемый контейнер, на нем необходимо разместить все элементы
`scrolling.setScrolling(element)` - сделать элемент перетаскиваемым (применить для каждого элемента на контейнере)
`scrolling.getScrollStep(): result` - получить текущую позицию прокрутки (в шагах): `result.sx`, `result.sy`
`scrolling.stepTo(option)` - прокрутка на заданное число шагов (`option.kx < 0` - влево; `option.kx > 0` - вправо; `option.ky < 0` - вверх; `option.ky > 0` - вниз)
`scrolling.scrollTo(option)` - прокрутка на заданную позицию (`option.sx`, `option.sy`), `option.anim` - анимация (`true`, `false`)

## Примеры

Пример использования библиотеки смотрите в папке `scrolling-example`. Его можно использовать в качестве шаблона для подключения библиотеки к своему проекту.

Пример полноценного приложения, использующего данную библиотеку - [Калькулятор](https://github.com/Arigato-Software/zeppos-calc-app)
